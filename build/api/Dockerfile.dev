FROM golang:1.22-alpine

ENV GOPATH /go
ENV CGO_ENABLED 0
ENV GO111MODULE on

WORKDIR /go/src

RUN apk update && \
    apk add git

COPY ./go.* ./

RUN go install github.com/air-verse/air@v1.52.2

COPY . .

RUN go mod download

EXPOSE 8080

CMD [ "air", "-c", ".air.toml" ]